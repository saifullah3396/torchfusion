# @package _global_
defaults:
  - /args/model_args: "???"
  - /args/data_args: "???"

args:
  training_args:
    with_amp_inference: ${with_amp_inference}
  data_args:
    dataset_config_name: ${dataset_config_name}
    train_preprocess_augs: null
    eval_preprocess_augs: null
    train_realtime_augs:
      - name: BasicImageAug
        kwargs:
          gray_to_rgb: True
          normalize: True
          mean:
            - 0.5
          std:
            - 0.5
          rescale_strategy:
            name: Rescale
            kwargs:
              size:
                - ${realtime_image_size_y}
                - ${realtime_image_size_x}
          key:
            - image
    eval_realtime_augs:
      - name: BasicImageAug
        kwargs:
          gray_to_rgb: True
          normalize: True
          mean:
            - 0.5
          std:
            - 0.5
          rescale_strategy:
            name: Rescale
            kwargs:
              size:
                - ${realtime_image_size_y}
                - ${realtime_image_size_x}
          key:
            - image

  analyzer_args:
    analyzer_output_dir: ${oc.env:TORCH_FUSION_OUTPUT_DIR}/analyzer/
    model_checkpoints: null
    tasks:
      generate_vae_features:
        task_type: GenerateVAEFeatures
        task_config:
          data_split: train
  model_args:
    checkpoint_state_dict_key: model

hydra:
  run:
    dir: ${args.analyzer_args.analyzer_output_dir}/${args.model_args.model_task}/${args.data_args.dataset_name}_${resolve_dir_name:${args.model_args.model_directory_name}}/${dir_name_from_overrides:${hydra.overrides}}
  sweep:
    dir: ${args.analyzer_args.analyzer_output_dir}/${args.model_args.model_task}/
    subdir: ${args.data_args.dataset_name}_${args.model_args.name}_${resolve_dir_name:${args.model_args.config.model_type}}/${dir_name_from_overrides:${hydra.overrides}}
  output_subdir: hydra
  job:
    chdir: False

realtime_image_size_x: 256
realtime_image_size_y: 64
dataset_config_name: default
with_amp_inference: False